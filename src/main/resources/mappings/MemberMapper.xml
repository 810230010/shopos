<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.wuliangit.shopos.dao.MemberMapper" >
  <!--通过用户名获取用户-->
  <select id="getByUsername" resultType="com.wuliangit.shopos.entity.Member">
    select
    <include refid="Base_Column_List" />
    from t_member
    where username = #{username}
  </select>
  <!--通过openid获取用户-->
  <select id="getByOpenid" resultType="com.wuliangit.shopos.entity.Member">
    select
    <include refid="Base_Column_List" />
    from t_member
    where openid = #{openid}
  </select>
  <!--获取推客审核列表-->
  <select id="getCheckList" resultType="com.wuliangit.shopos.dto.TuikeMemberDTO">
    select m.member_id,m.nikename,m.sex,m.email,m.create_time,m.points
    from t_member m,t_tuike k
    <where>
      k.is_check = 0 AND k.member_id = m.member_id AND k.state = "INIT"
      <if test="searchKey != null and searchKey != '' ">
        and ( q.title like '%${searchKey}%')
      </if>
    </where>
    order by
    <if test="orderColumn != null and orderColumn !='' and orderType != null and orderType != '' ">
      ${orderColumn} ${orderType},
    </if>
    k.create_time desc
  </select>
</mapper>